{"mode":"editor","version":1,"windowDimensions":{"x":114,"y":711,"width":1156,"height":691,"maximized":false},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"paths":["/Users/jmuraski/Documents/workspace/zeo_docker"],"buffers":[{"text":"#cloud-config\n  coreos:\n    etcd:\n      discovery: https://discovery.etcd.io/315fc8a7de51600f08b2c43be5911508\n      addr: $private_ipv4:4001\n      peer-addr: $private_ipv4:7001\n    fleet:\n      metadata: \"role=gateway,privateIp=$private_ipv4\"\n    units:\n      - name: etcd.service\n        command: start\n      - name: fleet.service\n        command: start\n\n  write_files:\n    - path: /home/core/.dockercfg\n      owner: core:core\n      permissions: 0644\n      content: |\n        {\"https://index.docker.io/v1/\":{\"auth\":\"<your auth>\",\"email\":\"<your email>\"},\"quay.io\":{\"auth\":\"<Your Auth\",\"email\":\"<Your email>\"}}\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":4927},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"encoding":"utf8","filePath":"/Users/jmuraski/Documents/workspace/zeo_docker/ec2-cloud-config-gateway","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"d545ae6e7131a29e3e31ca047651463ce62b8d33","deserializer":"TextBuffer"},{"text":"#! /bin/bash\n\necho \"Adding SSH Key for fleet\"\ncd /Users/jmuraski/Documents/workspace/coreos-vagrant\n\nvagrant ssh-config --host coreos-vagrant | sed -n \"s/IdentityFile//gp\" | xargs ssh-add\n\necho \"********************\"\necho \"Build Docker Image\"\ncd /Users/jmuraski/Documents/workspace/zeo_docker/frontend-proxy-pod/haproxy\n\ndocker build -t zeo_haproxy .\n\necho \"********************\"\necho \"Push new image to quay\"\ndocker tag zeo_haproxy quay.io/tcfbank/haproxy\n\ndocker push quay.io/tcfbank/haproxy\n\necho \"********************\"\necho \"Deploy Steps\"\n\ncd ..\necho \"********************************\"\necho \"Current Units runing\"\nfleetctl list-units\n\necho \"********************************\"\necho \"Current Files\"\nfleetctl list-unit-files\n\necho \"********************************\"\necho \"Destroying Current service\"\nfleetctl destroy haproxy.service\n\necho \"********************************\"\necho \"Submitting New Service\"\nfleetctl submit haproxy.service\n\necho \"********************************\"\necho \"Listing New Files\"\nfleetctl list-unit-files\n\necho \"********************************\"\necho \"Starting new Service\"\nfleetctl start haproxy.service\n\necho \"********************************\"\necho \"List Machines\"\nfleetctl list-machines\n\necho \"********************************\"\necho \"New Units runing\"\nfleetctl list-units\n\necho \"********************************\"\necho \"New Unit Status\"\nfleetctl status haproxy.service\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":4931},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"encoding":"utf8","filePath":"/Users/jmuraski/Documents/workspace/zeo_docker/frontend-proxy-pod/deployLocal.sh","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"ed582119215ed11cd7e9555c85f7b7d6ff49c08f","deserializer":"TextBuffer"},{"text":"[Unit]\nDescription=Zeo HA Proxy Container\nRequires=docker.service\nAfter=docker.service\n\n[Service]\nTimeoutStartSec=0\nKillMode=none\nUser=core\nWorkingDirectory=/home/core\nEnvironmentFile=/etc/environment\nRestart=always\nRestartSec=10s\nStartLimitInterval=10\nExecStartPre=-/bin/bash -c 'echo haproxy service file version 1.0.2'\nExecStartPre=-/usr/bin/docker kill ZEO_HAPROXY\nExecStartPre=-/usr/bin/docker rm ZEO_HAPROXY\nExecStartPre=-/usr/bin/docker pull quay.io/tcfbank/haproxy\nExecStart=/usr/bin/docker run  --rm -p 80:80 --name ZEO_HAPROXY -e HOST_IP=${COREOS_PUBLIC_IPV4} quay.io/tcfbank/haproxy\nExecStop=-/usr/bin/docker stop ZEO_HAPROXY\n\n[X-Fleet]\nConflicts=haproxy@*.service\nMachineMetadata=role=worker\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":4935},"deserializer":"Marker"},"4":{"id":4,"range":[[0,0],[0,1]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"5":{"id":5,"range":[[0,5],[0,6]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"encoding":"utf8","filePath":"/Users/jmuraski/Documents/workspace/zeo_docker/frontend-proxy-pod/haproxy@.service","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"77835301e88e0a4965a9e1e6ed8a203cceb3ff2e","deserializer":"TextBuffer"},{"text":"[Unit]\nDescription=Tomcat Server Registration\n\n# Requirements\nRequires=etcd.service\nRequires=zeoTomcat@%i.service\n\n# Dependency ordering and binding\nAfter=etcd.service\nAfter=zeoTomcat@%i.service\nBindsTo=zeoTomcat@%i.service\n\n[Service]\nTimeoutStartSec=0\nKillMode=none\nUser=core\nWorkingDirectory=/home/core\nEnvironmentFile=/etc/environment\nRestart=always\nRestartSec=10s\nStartLimitInterval=10\n\nExecStartPre=-/usr/bin/docker kill REGISTER_TOMCAT\nExecStartPre=-/usr/bin/docker rm REGISTER_TOMCAT\nExecStartPre=-/usr/bin/docker pull quay.io/tcfbank/docker_etcd_register\nExecStart=/usr/bin/docker run --rm --name REGISTER_TOMCAT -e KEY_PATH=api -e INSTANCE_NAME=zeoTomcat -e INSTANCE_NUMBER=%i -e INSTANCE_IP=${COREOS_PRIVATE_IPV4} -e INSTANCE_PORT=49880 -e 'EXTRA_ARGS=maxconn 32 check' quay.io/tcfbank/docker_etcd_register\nExecStop=-/usr/bin/etcdctl rm /endpoints/api/zeoTomcat%i\nExecStop=-/usr/bin/docker stop REGISTER_TOMCAT\n\n[X-Fleet]\nMachineOf=zeoTomcat@%i.service\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":4939},"deserializer":"Marker"},"4":{"id":4,"range":[[0,0],[0,1]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"5":{"id":5,"range":[[0,5],[0,6]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"encoding":"utf8","filePath":"/Users/jmuraski/Documents/workspace/zeo_docker/api-pod/registerTomcat@.service","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"bf1b69f1bfc7bbf9547ec7faa97f97af14d88642","deserializer":"TextBuffer"},{"text":"[Unit]\nDescription=Zeo Tomcat Container\nRequires=docker.service\nAfter=docker.service\n\n[Service]\nTimeoutStartSec=0\nKillMode=none\nUser=core\nWorkingDirectory=/home/core\nEnvironmentFile=/etc/environment\nRestart=always\nRestartSec=10s\nStartLimitInterval=10\nExecStartPre=-/usr/bin/docker kill ZEO_TOMCAT\nExecStartPre=-/usr/bin/docker rm ZEO_TOMCAT\nExecStartPre=-/usr/bin/docker pull quay.io/tcfbank/tomcat:prod\nExecStart=/usr/bin/docker run  -rm -p 49880:8080 -e TOMCAT_PASS=\"DevJamRocks4Ever\" --name ZEO_TOMCAT quay.io/tcfbank/tomcat:prod\nExecStop=-/usr/bin/docker stop ZEO_TOMCAT\n\n[X-Fleet]\nConflicts=zeoTomcat@*.service\nMachineMetadata=role=worker\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":4943},"deserializer":"Marker"},"4":{"id":4,"range":[[0,0],[0,1]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"5":{"id":5,"range":[[0,5],[0,6]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"encoding":"utf8","filePath":"/Users/jmuraski/Documents/workspace/zeo_docker/api-pod/zeoTomcat@.service","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"80bf6658c4411416b577bdecfe8541f35b527232","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":4924,"items":[{"id":4927,"softTabs":true,"displayBuffer":{"id":4928,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/zeo_docker/ec2-cloud-config-gateway","invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"TokenizedBuffer"},"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":4931,"softTabs":true,"displayBuffer":{"id":4932,"softWrapped":false,"editorWidthInChars":null,"scrollTop":460,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/zeo_docker/frontend-proxy-pod/deployLocal.sh","invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"TokenizedBuffer"},"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":4935,"softTabs":true,"displayBuffer":{"id":4936,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/zeo_docker/frontend-proxy-pod/haproxy@.service","invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"TokenizedBuffer"},"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":4939,"softTabs":true,"displayBuffer":{"id":4940,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/zeo_docker/api-pod/registerTomcat@.service","invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"TokenizedBuffer"},"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":4943,"softTabs":true,"displayBuffer":{"id":4944,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/zeo_docker/api-pod/zeoTomcat@.service","invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"TokenizedBuffer"},"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemURI":"/Users/jmuraski/Documents/workspace/zeo_docker/frontend-proxy-pod/haproxy@.service","focused":false,"deserializer":"Pane"},"activePaneId":4924,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-yaml","language-shellscript","language-hyperlink","language-todo"],"deserializer":"Workspace"},"grammars":{"deserializer":"GrammarRegistry","grammarOverridesByPath":{}},"packageStates":{"fuzzy-finder":{"/Users/jmuraski/Documents/workspace/zeo_docker/ec2-cloud-config-gateway":1421879934085,"/Users/jmuraski/Documents/workspace/zeo_docker/frontend-proxy-pod/deployLocal.sh":1421879946312,"/Users/jmuraski/Documents/workspace/zeo_docker/frontend-proxy-pod/haproxy@.service":1421901938062,"/Users/jmuraski/Documents/workspace/zeo_docker/api-pod/registerTomcat@.service":1421879963752,"/Users/jmuraski/Documents/workspace/zeo_docker/api-pod/zeoTomcat@.service":1421879967443},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":27479897},"tree-view":{"directoryExpansionStates":{"frontend-proxy-pod":{}},"selectedPath":"/Users/jmuraski/Documents/workspace/zeo_docker/frontend-proxy-pod/haproxy@.service","hasFocus":true,"attached":true,"scrollLeft":0,"scrollTop":0,"width":199},"find-and-replace":{"viewState":"","modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false},"projectViewState":"","resultsModelState":{"useRegex":false,"caseSensitive":false},"findHistory":["\\n\",","register","\\\"","\"","/n","'"],"replaceHistory":["\"","\\\"","\\n","\""],"pathsHistory":["\"","\\\"","\\n","\""]}}}