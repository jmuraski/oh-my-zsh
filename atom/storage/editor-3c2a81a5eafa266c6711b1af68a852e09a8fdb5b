{"mode":"editor","version":1,"windowDimensions":{"x":0,"y":22,"width":790,"height":666,"maximized":false},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/jmuraski/Documents/workspace/blog_posts/docker","buffers":[{"text":"<!DOCTYPE html>  \n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <title>docker</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <style>\n/*\nThis document has been created with Marked.app <http://marked2app.com>, Copyright 2013 Brett Terpstra\nContent is property of the document author\nPlease leave this notice in place, along with any additional credits below.\n---------------------------------------------------------------\nTitle: GitHub\nAuthor: Brett Terpstra\nDescription: Github README style. Includes theme for Pygmentized code blocks.\n*/\nhtml, body {\n  color: black;\n  font-style: \"Frutiger\", Helvetica, sans-serif;\n}\n\n*:not('#mkdbuttons') {\n  margin: 0;\n  padding: 0; }\n\n#wrapper {\n  font: 15px \"Frutiger\", Helvetica, sans-serif;\n\n  -webkit-font-smoothing: antialiased;\n  line-height: 1.7;\n  padding: 3px;\n  background: #fff;\n  border-radius: 3px;\n  -moz-border-radius: 3px;\n  -webkit-border-radius: 3px; \n}\n\np {\n  margin: 1em 0; \n}\n\na {\n  color: #4183c4;\n  text-decoration: none; }\n\n#wrapper {\n  background-color: #fff;\n  padding: 30px;\n  margin: 15px;\n  font-size: 15px;\n  line-height: 1.6; }\n  #wrapper > *:first-child {\n    margin-top: 0 !important; }\n  #wrapper > *:last-child {\n    margin-bottom: 0 !important; }\n\n@media screen {\n  #wrapper {\n    box-shadow: 0 0 0 1px #cacaca, 0 0 0 4px #eee; } }\nh1, h2, h3, h4, h5, h6 {\n  font-weight: 700;\n  line-height: 1.0;\n  cursor: text;\n  position: relative;\n  margin: 1em 0 15px;\n  padding: 0; }\n\nh1 {\n  font-size: 2.5em;\n  border-bottom: 1px solid #ddd;\n}\n\nh2 {\n  font-size: 2em;\n  border-bottom: 1px solid #eee;\n  color: #00f;\n}\n\nh3 {\n  font-size: 1.5em;\n}\n\nh4 {\n  font-size: 1.2em; }\n\nh5 {\n  font-size: 1em; }\n\nh6 {\n  color: #777;\n  font-size: 1em; }\n\np, blockquote, table, pre {\n  margin: 3px 0; }\n\nul {\n  padding-left: 30px; }\n\nol {\n  padding-left: 30px; }\n  ol li ul:first-of-type {\n    margin-top: 0px; }\n\nhr {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;\n  border: 0 none;\n  color: #ccc;\n  height: 4px;\n  margin: 15px 0;\n  padding: 0; }\n\n#wrapper > h2:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n#wrapper > h1:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n  #wrapper > h1:first-child + h2 {\n    margin-top: 0;\n    padding-top: 0; }\n#wrapper > h3:first-child, #wrapper > h4:first-child, #wrapper > h5:first-child, #wrapper > h6:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n\na:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {\n  margin-top: 0;\n  padding-top: 0; }\n\nh1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p, ul li > :first-child, ol li > :first-child {\n  margin-top: 0; }\n\ndl {\n  padding: 0; }\n  dl dt {\n    font-size: 14px;\n    font-weight: bold;\n    font-style: italic;\n    padding: 0;\n    margin: 15px 0 5px; }\n    dl dt:first-child {\n      padding: 0; }\n    dl dt > :first-child {\n      margin-top: 0; }\n    dl dt > :last-child {\n      margin-bottom: 0; }\n  dl dd {\n    margin: 0 0 15px;\n    padding: 0 15px; }\n    dl dd > :first-child {\n      margin-top: 0; }\n    dl dd > :last-child {\n      margin-bottom: 0; }\n\nblockquote {\n  border-left: 4px solid #DDD;\n  padding: 0 15px;\n  color: #777; }\n  blockquote > :first-child {\n    margin-top: 0; }\n  blockquote > :last-child {\n    margin-bottom: 10px; }\n\nem {\n  font-style: normal;\n  border: 1px solid #f00;\n  border-radius: 3px;\n  background-color: #efefef;\n  padding-left: 3px;\n  padding-right: 3px;\n  margin-left: 1px;\n  margin-right: 1px;\n\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n  font-size: 100%;\n}\n  table th {\n    font-weight: bold;\n    border: 1px solid #ccc;\n    padding: 6px 13px; }\n  table td {\n    border: 1px solid #ccc;\n    padding: 6px 13px; }\n  table tr {\n    border-top: 1px solid #ccc;\n    background-color: #fff; }\n    table tr:nth-child(2n) {\n      background-color: #f8f8f8; }\n\nimg {\n  max-width: 100%; }\n\ncode, tt {\n  margin: 0 2px;\n  padding: 0 5px;\n  white-space: nowrap;\n  border: 1px solid #eaeaea;\n  background-color: #f8f8f8;\n  border-radius: 3px;\n  font-family: \"Source Code Pro\", Consolas, Courier, monospace;\n  font-size: 80%;\n  color: #333333; }\n\npre > code {\n  margin: 0;\n  padding: 0;\n  white-space: pre;\n  border: none;\n  background: transparent; }\n\n.highlight pre {\n  background-color: #f8f8f8;\n  border: 1px solid #ccc;\n  font-size: 80%;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n\npre {\n  background-color: #f8f8f8;\n  border: 1px solid #ccc;\n  font-size: 110%;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px;\n  margin: 26px 0; }\n  pre code, pre tt {\n    background-color: transparent;\n    border: none; }\n\n.poetry pre {\n  font-family: Garamond, Georgia, serif !important;\n  font-style: italic;\n  font-size: 110% !important;\n  line-height: 1.6em;\n  display: block;\n  margin-left: 1em; }\n  .poetry pre code {\n    font-family: Garamond, Georgia, serif !important;\n    word-break: break-all;\n    word-break: break-word;\n    /* Non standard for webkit */\n    -webkit-hyphens: auto;\n    -moz-hyphens: auto;\n    hyphens: auto;\n    white-space: pre-wrap; }\n\nsup, sub, a.footnote {\n  font-size: 1.4ex;\n  height: 0;\n  line-height: 1;\n  vertical-align: super;\n  position: relative; }\n\nsub {\n  vertical-align: sub;\n  top: -1px; }\n\n@media print {\n  body {\n    background: #fff; }\n\n  img, pre, blockquote, table, figure {\n    page-break-inside: avoid; }\n\n  #wrapper {\n    background: #fff;\n    border: none; }\n\n  pre code {\n    overflow: visible; } }\n@media screen {\n  body.inverted {\n    color: #eee !important;\n    border-color: #555;\n    box-shadow: none; }\n\n  .inverted #wrapper, .inverted hr, .inverted p, .inverted td, .inverted li, .inverted h1, .inverted h2, .inverted h3, .inverted h4, .inverted h5, .inverted h6, .inverted th, .inverted .math, .inverted caption, .inverted dd, .inverted dt, .inverted blockquote {\n    color: #eee !important;\n    border-color: #555;\n    box-shadow: none; }\n  .inverted td, .inverted th {\n    background: #333; }\n  .inverted pre, .inverted code, .inverted tt {\n    background: #eeeeee !important;\n    color: #111; }\n  .inverted h2 {\n    border-color: #555555; }\n  .inverted hr {\n    border-color: #777;\n    border-width: 1px !important; }\n\n  ::selection {\n    background: rgba(157, 193, 200, 0.5); }\n\n  h1::selection {\n    background-color: rgba(45, 156, 208, 0.3); }\n\n  h2::selection {\n    background-color: rgba(90, 182, 224, 0.3); }\n\n  h3::selection, h4::selection, h5::selection, h6::selection, li::selection, ol::selection {\n    background-color: rgba(133, 201, 232, 0.3); }\n\n  code::selection {\n    background-color: rgba(0, 0, 0, 0.7);\n    color: #eeeeee; }\n  code span::selection {\n    background-color: rgba(0, 0, 0, 0.7) !important;\n    color: #eeeeee !important; }\n\n  a::selection {\n    background-color: rgba(255, 230, 102, 0.2); }\n\n  .inverted a::selection {\n    background-color: rgba(255, 230, 102, 0.6); }\n\n  td::selection, th::selection, caption::selection {\n    background-color: rgba(180, 237, 95, 0.5); }\n\n  .inverted {\n    background: #0b2531;\n    background: #252a2a; }\n    .inverted #wrapper {\n      background: #252a2a; }\n    .inverted a {\n      color: #acd1d5; } }\n.highlight .c {\n  color: #998;\n  font-style: italic; }\n.highlight .err {\n  color: #a61717;\n  background-color: #e3d2d2; }\n.highlight .k, .highlight .o {\n  font-weight: bold; }\n.highlight .cm {\n  color: #998;\n  font-style: italic; }\n.highlight .cp {\n  color: #999;\n  font-weight: bold; }\n.highlight .c1 {\n  color: #998;\n  font-style: italic; }\n.highlight .cs {\n  color: #999;\n  font-weight: bold;\n  font-style: italic; }\n.highlight .gd {\n  color: #000;\n  background-color: #fdd; }\n  .highlight .gd .x {\n    color: #000;\n    background-color: #faa; }\n.highlight .ge {\n  font-style: italic; }\n.highlight .gr {\n  color: #a00; }\n.highlight .gh {\n  color: #999; }\n.highlight .gi {\n  color: #000;\n  background-color: #dfd; }\n  .highlight .gi .x {\n    color: #000;\n    background-color: #afa; }\n.highlight .go {\n  color: #888; }\n.highlight .gp {\n  color: #555; }\n.highlight .gs {\n  font-weight: bold; }\n.highlight .gu {\n  color: #800080;\n  font-weight: bold; }\n.highlight .gt {\n  color: #a00; }\n.highlight .kc, .highlight .kd, .highlight .kn, .highlight .kp, .highlight .kr {\n  font-weight: bold; }\n.highlight .kt {\n  color: #458;\n  font-weight: bold; }\n.highlight .m {\n  color: #099; }\n.highlight .s {\n  color: #d14; }\n.highlight .na {\n  color: #008080; }\n.highlight .nb {\n  color: #0086B3; }\n.highlight .nc {\n  color: #458;\n  font-weight: bold; }\n.highlight .no {\n  color: #008080; }\n.highlight .ni {\n  color: #800080; }\n.highlight .ne, .highlight .nf {\n  color: #900;\n  font-weight: bold; }\n.highlight .nn {\n  color: #555; }\n.highlight .nt {\n  color: #000080; }\n.highlight .nv {\n  color: #008080; }\n.highlight .ow {\n  font-weight: bold; }\n.highlight .w {\n  color: #bbb; }\n.highlight .mf, .highlight .mh, .highlight .mi, .highlight .mo {\n  color: #099; }\n.highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .se, .highlight .sh, .highlight .si, .highlight .sx {\n  color: #d14; }\n.highlight .sr {\n  color: #009926; }\n.highlight .s1 {\n  color: #d14; }\n.highlight .ss {\n  color: #990073; }\n.highlight .bp {\n  color: #999; }\n.highlight .vc, .highlight .vg, .highlight .vi {\n  color: #008080; }\n.highlight .il {\n  color: #099; }\n.highlight .gc {\n  color: #999;\n  background-color: #EAF2F5; }\n\n.type-csharp .highlight .k, .type-csharp .highlight .kt {\n  color: #00F; }\n.type-csharp .highlight .nf {\n  color: #000;\n  font-weight: normal; }\n.type-csharp .highlight .nc {\n  color: #2B91AF; }\n.type-csharp .highlight .nn {\n  color: #000; }\n.type-csharp .highlight .s, .type-csharp .highlight .sc {\n  color: #A31515; }\n\nbody.dark #wrapper {\n  background: transparent !important;\n  box-shadow: none !important; }\n\n@media print{\n#generated-toc-clone,#generated-toc{display:none!important}\n}\n#generated-toc-clone li.missing,#mkreplaced-toc li.missing{list-style-type:none!important}#generated-toc-clone li, #mkreplaced-toc li{list-style-type:upper-roman}#generated-toc-clone li li, #mkreplaced-toc li li{list-style-type:decimal}#generated-toc-clone li li li,#mkreplaced-toc li li li{list-style-type:decimal-leading-zero}#generated-toc-clone li li li li,#mkreplaced-toc li li li li{list-style-type:lower-greek}#generated-toc-clone li li li li li,#mkreplaced-toc li li li li li{list-style-type:disc}#generated-toc-clone li li li li li li,#mkreplaced-toc li li li li li li{list-style-type:square}\n</style>\n\n</head>\n<body class=\"normal\">\n  <div id=\"wrapper\">\n      <h1 id=\"docker\">Docker</h1>\n\n<p>As my project started up I was looking for a good way to create my application and run it locally and on servers. I was looking into different technologies like Chef, Puppet and Salt but when I went to start up my Digital Ocean server it had another option I hadn&#8217;t heard much about. I could create an Image with Docker. Since I didn&#8217;t know what this was I decided to look into it.</p>\n\n<h2 id=\"whatisdocker\">What is Docker</h2>\n\n<p>The definition from their website is</p>\n<pre><code class=\"(null)\">Docker is an open platform for developers and sysadmins to build, ship, and run distributed applications. Consisting of Docker Engine, a portable, lightweight runtime and packaging tool, and Docker Hub, a cloud service for sharing applications and automating workflows, Docker enables apps to be quickly assembled from components and eliminates the friction between development, QA, and production environments. As a result, IT can ship faster and run the same app, unchanged, on laptops, data center VMs, and any cloud.</code></pre>\n\n<p>allows me to create a simple container that can run my application. I wouldn&#8217;t run all my components on it (DB and App server) but I would run my app server and code in one container and my DB in another. This sounded great to me. I have been a big fan of a single file for deploys for a long time, this was a step further. I could take my application package it up and then ship it as a whole container through my environments. The only thing that would have to change from environment to environment was the other containers it was wired to. I also could easily have different versions of java on my machine to run the application, different versions of tomcat, or of Postgresql. I could also create a container definition for any of these items, store them on Docker Hub and anyone on the team or even the build server, could pull them down and run the exact same version.</p>\n\n<h2 id=\"creatingacontainer\">Creating a Container</h2>\n\n<p>One of the places that docker helps was with setting up a local DB. It allowed all of us on the team to have the same DB set up the same way. Here are the steps I went through to set up the container. For installing Docker here are some good links <a href=\"http://viget.com/extend/how-to-use-docker-on-os-x-the-missing-guide\">How to Use Docker on OS X: The Missing Guide</a> and the main guide <a href=\"https://docs.docker.com/installation/mac/\">Installing Docker on Mac OS X</a> Once you have docker installed you can start to create and run your container.</p>\n\n<h3 id=\"createdockerfile\">Create Dockerfile</h3>\n<pre><code class=\"bash\">#\n# Dockerfile for Postgresql\n#\n\nFROM ubuntu\nMAINTAINER Joseph Muraski\n\n# Add the PostgreSQL PGP key to verify their Debian packages.\n# It should be the same key as https://www.postgresql.org/media/keys/ACCC4CF8.asc\nRUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys B97B0AFCAA1A47F044F244A07FCC7D46ACCC4CF8\n\n# Add PostgreSQL&apos;s repository. It contains the most recent stable release\n#   of PostgreSQL, ``9.3``.\nRUN echo &quot;deb http://apt.postgresql.org/pub/repos/apt/ precise-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list\n\n# Update the Ubuntu and PostgreSQL repository indexes\nRUN apt-get update\n\n# Install ``python-software-properties``, ``software-properties-common`` and PostgreSQL 9.3\n# There are some warnings (in red) that show up during the build. You can hide\n#  them by prefixing each apt-get statement with DEBIAN_FRONTEND=noninteractive\nRUN apt-get -y -q install python-software-properties software-properties-common\nRUN apt-get -y -q install postgresql-9.3 postgresql-client-9.3 postgresql-contrib-9.3\n\n# Note: The official Debian and Ubuntu images automatically ``apt-get clean``\n# after each ``apt-get``\n\n# Run the rest of the commands as the ``postgres`` user created by the ``postgres-9.3`` package when it was ``apt-get installed``\nUSER postgres\n\n# Create a PostgreSQL role named ``docker`` with ``docker_pass`` as the password and\n# then create a database `docker_local_db` owned by the ``docker`` role.\n# Note: here we use ``&amp;&amp;\\`` to run commands one after the other - the ``\\``\n#     allows the RUN command to span multiple lines.\nRUN   /etc/init.d/postgresql start &amp;&amp;\\\npsql --command &quot;CREATE USER docker WITH SUPERUSER PASSWORD &apos;docker_pass&apos;;&quot; &amp;&amp;\\\ncreatedb -O docker docker_local_db\n\n# Adjust PostgreSQL configuration so that remote connections to the\n# database are possible.\nRUN echo &quot;host all  all    0.0.0.0/0  md5&quot; &gt;&gt; /etc/postgresql/9.3/main/pg_hba.conf\n\n# And add ``listen_addresses`` to ``/etc/postgresql/9.3/main/postgresql.conf``\nRUN echo &quot;listen_addresses=&apos;*&apos;&quot; &gt;&gt; /etc/postgresql/9.3/main/postgresql.conf\n\n# Expose the PostgreSQL port\nEXPOSE 5432\n\n# Add VOLUMEs to allow backup of config, logs and databases\nVOLUME  [&quot;/etc/postgresql&quot;, &quot;/var/log/postgresql&quot;, &quot;/var/lib/postgresql&quot;]\n\n# Set the default command to run when starting the container\nCMD [&quot;/usr/lib/postgresql/9.3/bin/postgres&quot;, &quot;-D&quot;, &quot;/var/lib/postgresql/9.3/main&quot;, &quot;-c&quot;, &quot;config_file=/etc/postgresql/9.3/main/postgresql.conf&quot;]</code></pre>\n\n<p>Dockerfile does a few things, it installs postgresql, exposes port 5432 outside of the container and maps some shared volumes. Lets go over some of the commands that are used and what they are used for.<br/>\n- <a href=\"https://docs.docker.com/reference/builder/#from\">FROM</a> - This sets the base image for the file. It can be a bare linux install like ubuntu or a fully crafted image that someone has shared in a docker repository.<br/>\n- <a href=\"https://docs.docker.com/reference/builder/#maintainer\">MAINTAINER</a> - This is a field to say who created this docker file<br/>\n- <a href=\"https://docs.docker.com/reference/builder/#run\">RUN</a> - is the way you tell docker to RUN a command agianst the container. This can be any unix command such as apt-get install, curl, wget, or chmod<br/>\n- <a href=\"https://docs.docker.com/reference/builder/#user\">USER</a> - Sets the user to run subsequent commands as<br/>\n- <a href=\"https://docs.docker.com/reference/builder/#expose\">EXPOSE</a> - Has docker expose these ports<br/>\n- <a href=\"https://docs.docker.com/reference/builder/#cmd\">CMD</a> - Provides the default for executing the container</p>\n\n<p>Commands that are not used in this Dockerfile but that I have used frequently are<br/>\n- <a href=\"https://docs.docker.com/reference/builder/#add\">ADD</a> - Adds files to the docker file system, these can be from a url, tar or zip file<br/>\n- <a href=\"https://docs.docker.com/reference/builder/#copy\">COPY</a> - similar to add but only copies the files over, they have to be files, not urls and will not unzip or untar a file<br/>\n- <a href=\"https://docs.docker.com/reference/builder/#env\">ENV</a> - Allows you to set environment variables inside the container. This command can be used to alter PATH also.</p>\n\n<p>You can get a complete list of Dockerfile commands from the <a href=\"https://docs.docker.com/reference/builder/\">documentation</a> the Digital Ocean article <a href=\"https://www.digitalocean.com/community/tutorials/docker-explained-using-dockerfiles-to-automate-building-of-images\">Docker Explained: Using Dockerfiles to Automate Building of Images</a> the <a href=\"https://docs.docker.com/articles/dockerfile_best-practices/\">Best practices for writing Dockerfiles</a> from the Docker documentation and this good guide <a href=\"http://www.projectatomic.io/docs/docker-image-author-guidance/\">Guidance for Docker Image Authors</a>. There are also numerous other articles and tips on how to write a good Dockerfile.</p>\n\n<h3 id=\"createbuildscript\">Create Build Script</h3>\n\n<p>Here is a bash script that is used to create the image.</p>\n<pre><code class=\"(null)\">#!/bin/sh\ndocker build -t db_server/postgresql .</code></pre>\n\n<p>very simple file in the same location as the Dockerfile will create the image with the name db_server/postgresql. For more options on the docker build command you can read the <a href=\"https://docs.docker.com/reference/commandline/cli/#build\">command line reference</a>.</p>\n\n<h3 id=\"maptheports\">Map the Ports</h3>\n\n<p>Since boot2docker runs in Virtual Box you will need to map the ports out so that you can connect to them locally. This script maps port 49155 from the Virtual Box instance to 5432 on the host machine.</p>\n<pre><code class=\"(null)\">#!/bin/sh\n\nVBoxManage modifyvm &quot;boot2docker-vm&quot; --natpf1 &quot;tcp-port-dockerDb49155,tcp,,5432,,49155&quot;;\nVBoxManage modifyvm &quot;boot2docker-vm&quot; --natpf1 &quot;udp-port-dockerDb49155,udp,,5432,,49155&quot;;</code></pre>\n\n<h3 id=\"createcontainer\">Create Container</h3>\n\n<p>As of Docker 1.3 you can use <a href=\"https://docs.docker.com/reference/commandline/cli/#create\">docker create</a> to create the container without running it. Before this you would have to run the container one way the first time and then use docker start on subsequent starts. Now you can use docker create then just start the container every time.</p>\n<pre><code class=\"(null)\">#!/bin/sh\n\ndocker create -d -p 49155:5432 -P --name dockerServerDb db_server/postgresql</code></pre>\n\n<h3 id=\"startdocker\">Start Docker</h3>\n<pre><code class=\"(null)\">#!/bin/sh\n\necho &quot;Starting docker.....\\n&quot;\nboot2docker up\n\necho &quot;\\nStarting dockerServerDb docker instance\\nType following command to connnect to db&quot;\necho &quot;psql -h localhost -p 5432 -d docker_local_db -U docker --password\\n\\n&quot;\n\ndocker start dockerServerDb</code></pre>\n\n<p>script makes sure that boot2docker is running. Then it starts the container. It is also nice enought to remind you how to connect to the db if you want to have and psql installed locally.</p>\n\n<h2 id=\"conclusion\">Conclusion</h2>\n\n<p>While setting up Postgresql is not a simple case it is a good example of how this could help you locally and also shows all the steps you would need to do. These files could all be checked into your source control and every developer on the team would now have the same db running the same way. You could easily have different versions of postgresql running for different projects or you could add other services like Redis if needed. I find docker to be a great tool and this is only the beggining of what it can do for you.</p>\n<!-- ##END MARKED WRAPPER## -->\n    </div>\n</body>\n</html>","markers":{"markers":{"1":{"id":1,"range":[[0,0],[588,7]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":8,"goalBufferRange":null,"autoscroll":false},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"encoding":"utf8","filePath":"/Users/jmuraski/Documents/workspace/blog_posts/docker/docker.html","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"025ac100145760a7672f6afb2aa8a0b4562372dc","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":7,"items":[{"id":8,"softTabs":true,"displayBuffer":{"id":9,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/blog_posts/docker/docker.html","invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"TokenizedBuffer"},"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemUri":"/Users/jmuraski/Documents/workspace/blog_posts/docker/docker.html","focused":false,"deserializer":"Pane"},"activePaneId":7,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-html","language-css","language-hyperlink","language-todo"],"deserializer":"Workspace"},"packageStates":{"fuzzy-finder":{"/Users/jmuraski/Documents/workspace/blog_posts/docker/docker.html":1417748557308},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":592144},"tree-view":{"directoryExpansionStates":{},"selectedPath":"/Users/jmuraski/Documents/workspace/blog_posts/docker/docker.html","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}