{"mode":"editor","version":1,"windowDimensions":{"x":0,"y":22,"width":1284,"height":458,"maximized":false},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/jmuraski/Documents/workspace/docker-cookbooks","buffers":[{"text":"FROM debian:jessie\n\n# Install Java.\nRUN apt-get update\nRUN apt-get install -y openjdk-7-jre\n\nRUN apt-get install -yq --no-install-recommends wget pwgen ca-certificates\nRUN apt-get clean\n\nRUN rm -rf /var/lib/apt/lists/*\n\n\nENV JAVA_HOME /usr/lib/jvm/java-7-openjdk-amd64\nENV TOMCAT_MAJOR_VERSION 8\nENV TOMCAT_MINOR_VERSION 8.0.11\nENV CATALINA_HOME /tomcat\n\nRUN wget -q https://archive.apache.org/dist/tomcat/tomcat-${TOMCAT_MAJOR_VERSION}/v${TOMCAT_MINOR_VERSION}/bin/apache-tomcat-${TOMCAT_MINOR_VERSION}.tar.gz\nRUN wget -qO- https://archive.apache.org/dist/tomcat/tomcat-${TOMCAT_MAJOR_VERSION}/v${TOMCAT_MINOR_VERSION}/bin/apache-tomcat-${TOMCAT_MINOR_VERSION}.tar.gz.md5 | md5sum -c -\nRUN tar zxf apache-tomcat-*.tar.gz\nRUN rm apache-tomcat-*.tar.gz\nRUN mv apache-tomcat* /tomcat\n\nADD create_tomcat_admin_user.sh /create_tomcat_admin_user.sh\nADD run.sh /run.sh\nRUN chmod +x /*.sh\n\nEXPOSE 8080\nCMD [\"/run.sh\"]\n","markers":{"markers":{"1":{"id":1,"range":[[0,18],[0,18]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":104,"goalBufferRange":null},"deserializer":"Marker"},"2":{"id":2,"range":[[3,0],[3,18]],"tailed":true,"reversed":true,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":10,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/Dockerfile","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"6bf1ae8d6cff805917a3ee141a2ad8374c821e91","deserializer":"TextBuffer"},{"text":"#!/bin/bash\n\nif [ -f /.tomcat_admin_created ]; then\n    echo \"Tomcat 'admin' user already created\"\n    exit 0\nfi\n\n#generate password\nPASS=${TOMCAT_PASS:-$(pwgen -s 12 1)}\n_word=$( [ ${TOMCAT_PASS} ] && echo \"preset\" || echo \"random\" )\n\necho \"=> Creating and admin user with a ${_word} password in Tomcat\"\nsed -i -r 's/<\\/tomcat-users>//' ${CATALINA_HOME}/conf/tomcat-users.xml\necho '<role rolename=\"manager-gui\"/>' >> ${CATALINA_HOME}/conf/tomcat-users.xml\necho '<role rolename=\"manager-script\"/>' >> ${CATALINA_HOME}/conf/tomcat-users.xml\necho '<role rolename=\"manager-jmx\"/>' >> ${CATALINA_HOME}/conf/tomcat-users.xml\necho '<role rolename=\"admin-gui\"/>' >> ${CATALINA_HOME}/conf/tomcat-users.xml\necho '<role rolename=\"admin-script\"/>' >> ${CATALINA_HOME}/conf/tomcat-users.xml\necho \"<user username=\\\"admin\\\" password=\\\"${PASS}\\\" roles=\\\"manager-gui,manager-script,manager-jmx,admin-gui, admin-script\\\"/>\" >> ${CATALINA_HOME}/conf/tomcat-users.xml\necho '</tomcat-users>' >> ${CATALINA_HOME}/conf/tomcat-users.xml\necho \"=> Done!\"\ntouch /.tomcat_admin_created\n\necho \"========================================================================\"\necho \"You can now configure to this Tomcat server using:\"\necho \"\"\necho \"    admin:${PASS}\"\necho \"\"\necho \"========================================================================\"\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":14},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/create_tomcat_admin_user.sh","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"d272a646e77a35c5a1df4b1090ab32a1e4c87675","deserializer":"TextBuffer"},{"text":"#!/bin/bash\n\nif [ ! -f /.tomcat_admin_created ]; then\n    /create_tomcat_admin_user.sh\nfi\n\nexec ${CATALINA_HOME}/bin/catalina.sh run\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":18},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/run.sh","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"5ce793d0bc756990c393185c033132b40af9b0d5","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":7,"items":[{"id":10,"softTabs":true,"displayBuffer":{"id":11,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/Dockerfile","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":14,"softTabs":true,"displayBuffer":{"id":15,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/create_tomcat_admin_user.sh","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":18,"softTabs":true,"displayBuffer":{"id":19,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/run.sh","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemUri":"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/run.sh","focused":false,"deserializer":"Pane"},"activePaneId":7,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-shellscript","language-hyperlink","language-todo"],"deserializer":"Workspace"},"packageStates":{"fuzzy-finder":{"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/Dockerfile":1412256613388,"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/create_tomcat_admin_user.sh":1412256670443,"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/run.sh":1412256671119},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":50314213},"tree-view":{"directoryExpansionStates":{"jdk7-oracle":{},"tomcat8":{}},"selectedPath":"/Users/jmuraski/Documents/workspace/docker-cookbooks/tomcat8/run.sh","hasFocus":true,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}