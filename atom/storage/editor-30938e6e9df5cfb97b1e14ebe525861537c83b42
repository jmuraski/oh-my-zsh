{"mode":"editor","version":1,"windowDimensions":{"x":250,"y":250,"width":2217,"height":1100,"maximized":false},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"paths":["/Users/jmuraski/Documents/workspace/remoteinsights/webapp"],"buffers":[{"text":"(function(){\n  var singleStrollerAverageAreaName = 'single-stroller-average-area';\n  var doubleStrollerAverageAreaName = 'double-stroller-average-area';\n  var strollerAverageAreaName = 'stroller-average-area';\n  var singleStrollerAverageLineName = 'single-stroller-average-line';\n  var doubleStrollerAverageLineName = 'double-stroller-average-line';\n  var strollerAverageLineName = 'stroller-average-line';\n\n  var strollerAverageGradientStyle = [\n    {\n      \"offset\":  \"0%\",\n      \"stop-color\": \"#fff\",\n      \"stop-opacity\": .5\n    },\n    {\n      \"offset\":  \"100%\",\n      \"stop-color\": \"#999\",\n      \"stop-opacity\": 1\n    }\n  ];\n\n  var strollerAverageSingleLineStyle = {\n    'fill': 'none',\n    'stroke': 'blue',\n    'stroke-width': '.5px'\n  };\n\n  var strollerAverageDoubleLineStyle = {\n    'fill': 'none',\n    'stroke': 'red',\n    'stroke-width': '.5px'\n  };\n\n  var strollerAverageLineStyle = {\n    'fill': 'none',\n    'stroke': 'green',\n    'stroke-width': '.5px'\n  };\n\n  var strollerAverageGraph = new RID3LineGraph();\n  var strollerAverageDateParser = strollerAverageGraph.getDateParser(\"%Y-%m-%d\");\n  strollerAverageGraph.initMargin({top: 20, right: 60, bottom: 30, left: 20})\n    .initXAxis()\n    .initYAxis()\n    .initSvg('d3-stroller-average', \"stroller-average\")\n\n    .addArea(singleStrollerAverageAreaName, 'date', 0, 'singleAverage')\n    .styleArea(singleStrollerAverageAreaName, strollerAverageGradientStyle)\n    .addArea(doubleStrollerAverageAreaName, 'date', 0, 'doubleAverage')\n    .styleArea(doubleStrollerAverageAreaName, strollerAverageGradientStyle)\n    .addArea(strollerAverageAreaName, 'date', 0, 'average')\n    .styleArea(strollerAverageAreaName, strollerAverageGradientStyle)\n\n    .addLine(singleStrollerAverageLineName, 'date', 'singleAverage')\n    .styleLine(singleStrollerAverageLineName, strollerAverageSingleLineStyle)\n    .addLine(doubleStrollerAverageLineName, 'date', 'doubleAverage')\n    .styleLine(doubleStrollerAverageLineName, strollerAverageDoubleLineStyle)\n    .addLine(strollerAverageLineName, 'date', 'average')\n    .styleLine(strollerAverageLineName, strollerAverageLineStyle)\n\n    .initZoom()\n    .render(\"averageRentalTimes\", 'date', 'maxAverage', function(data) {\n      data.forEach(function(d) {\n        d.date = strollerAverageDateParser(d.date);\n        d.singleAverage = +d.singleAverage;\n        d.doubleAverage = +d.doubleAverage;\n        d.average = +d.average;\n        d.maxAverage = _.max([d.singleAverage, d.doubleAverage, d.average]);\n      });\n\n      data = _.sortBy(data, 'date');\n\n      var filteredData = {};\n      filteredData[singleStrollerAverageAreaName] = data;\n      filteredData[singleStrollerAverageLineName] = data;\n      filteredData[doubleStrollerAverageAreaName] = data;\n      filteredData[doubleStrollerAverageLineName] = data;\n      filteredData[strollerAverageAreaName] = data;\n      filteredData[strollerAverageLineName] = data;\n\n      return filteredData;\n    });\n})();\n","markers":{"markers":{"1":{"id":1,"range":[[82,1],[82,1]],"tailed":false,"reversed":true,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":24,"goalBufferRange":null,"preserveFolds":true},"deserializer":"Marker"},"9":{"id":9,"range":[[0,0],[0,11]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"63":{"id":63,"range":[[0,11],[0,12]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"151":{"id":151,"range":[[82,1],[82,2]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"152":{"id":152,"range":[[0,0],[0,1]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"153":{"id":153,"range":[[0,0],[6,56]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"154":{"id":154,"range":[[8,0],[19,4]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"155":{"id":155,"range":[[21,0],[25,4]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"156":{"id":156,"range":[[27,0],[31,4]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"157":{"id":157,"range":[[33,0],[37,4]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"158":{"id":158,"range":[[39,0],[44,55]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"159":{"id":159,"range":[[46,0],[51,69]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"160":{"id":160,"range":[[53,0],[58,65]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"161":{"id":161,"range":[[60,0],[68,9]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"162":{"id":162,"range":[[70,0],[70,36]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"163":{"id":163,"range":[[72,0],[78,51]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"164":{"id":164,"range":[[80,0],[82,5]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{},"deserializer":"Marker"},"169":{"id":169,"range":[[82,1],[82,2]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"},"170":{"id":170,"range":[[0,0],[0,1]],"tailed":true,"reversed":false,"valid":true,"invalidate":"overlap","persistent":true,"properties":{},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"encoding":"utf8","filePath":"/Users/jmuraski/Documents/workspace/remoteinsights/webapp/grails-app/assets/javascripts/application/reports/averageRentalTimes.js","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"1a583ffb7b4a605beb8fd18cf72c0d1ae148782f","deserializer":"TextBuffer"},{"text":"-- *********************************************************************\n-- Update Database Script\n-- *********************************************************************\n-- Change Log: changelog.groovy\n-- Ran at: 1/22/15 10:09 AM\n-- Against: ri_dev@jdbc:postgresql://localhost:5432/ri\n-- Liquibase version: 2.0.5\n-- *********************************************************************\n\n-- Lock Database\n-- Changeset migration-jmuraski-20141217-001.groovy::jmuraski-2014-12-17-01::jmuraski::(Checksum: 3:ba9089baa2fa6c109445faa20fbc7355)\nCREATE TABLE stroller_rental_time (id int8 NOT NULL, \"version\" int8 NOT NULL, date_created TIMESTAMP WITH TIME ZONE NOT NULL, last_updated TIMESTAMP WITH TIME ZONE NOT NULL, rental_minutes int8 NOT NULL, rental_event_id int8 NOT NULL, return_event_id int8 NOT NULL, rental_date DATE NOT NULL, CONSTRAINT \"stroller_rental_timePK\" PRIMARY KEY (id));\n\nINSERT INTO databasechangelog (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('jmuraski', '', NOW(), 'Create Table', 'EXECUTED', 'migration-jmuraski-20141217-001.groovy', 'jmuraski-2014-12-17-01', '2.0.5', '3:ba9089baa2fa6c109445faa20fbc7355', 75);\n\n-- Changeset migration-jmuraski-20141217-001.groovy::jmuraski-2014-12-17-02::jmuraski::(Checksum: 3:6789a79fe6a607644af8ef91331643da)\nALTER TABLE stroller_rental_time ADD CONSTRAINT \"FK_stroller_rental_time_stroller_event_id\" FOREIGN KEY (rental_event_id) REFERENCES stroller_event (id);\n\nALTER TABLE stroller_rental_time ADD CONSTRAINT \"FK_stroller_return_time_stroller_event_id\" FOREIGN KEY (return_event_id) REFERENCES stroller_event (id);\n\nINSERT INTO databasechangelog (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('jmuraski', '', NOW(), 'Add Foreign Key Constraint (x2)', 'EXECUTED', 'migration-jmuraski-20141217-001.groovy', 'jmuraski-2014-12-17-02', '2.0.5', '3:6789a79fe6a607644af8ef91331643da', 76);\n\n-- Changeset migration-jmuraski-20150106-001.groovy::jmuraski-2015-01-06-01::jmuraski::(Checksum: 3:6add67c53490490acd3d4be478087cf3)\nCREATE SEQUENCE seq_stroller_rental_time;\n\nINSERT INTO databasechangelog (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('jmuraski', '', NOW(), 'Create Sequence', 'EXECUTED', 'migration-jmuraski-20150106-001.groovy', 'jmuraski-2015-01-06-01', '2.0.5', '3:6add67c53490490acd3d4be478087cf3', 77);\n\n-- Changeset migration-jmuraski-20150106-001.groovy::jmuraski-2015-01-06-02::jmuraski::(Checksum: 3:f2702ef3de170d5ec85f6e4cb25a8ff6)\nINSERT INTO STROLLER_RENTAL_TIME (\n                id,\n                version,\n                date_created,\n                last_updated,\n                rental_minutes,\n                rental_event_id,\n                return_event_id,\n                rental_date\n                )\n            SELECT\n                nextval('seq_stroller_rental_time') as newID,\n                1 as newVersion,\n                date_created,\n                last_updated,\n                ceiling(extract(epoch from diff::interval)/60)::int8,\n                rental_event,\n                id,\n                date_created::date\n            FROM\n                (SELECT\n                    *, date_created - lag(date_created) OVER (ORDER by beacon_id, date_created) as diff, lag(id) OVER (ORDER by beacon_id, date_created) as rental_event\n                FROM\n                    (SELECT *\n                    FROM stroller_event\n                    WHERE\n                    (stroller_event.type = 'RENTED' or stroller_event.type = 'INVENTORY')\n                    ORDER BY\n                        beacon_id,\n                        date_created desc\n                    ) as RENTAL_EVENTS\n                ) as RENTAL_DATA\n            WHERE\n                RENTAL_DATA.type = 'INVENTORY';\n\nINSERT INTO databasechangelog (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('jmuraski', '', NOW(), 'Custom SQL', 'EXECUTED', 'migration-jmuraski-20150106-001.groovy', 'jmuraski-2015-01-06-02', '2.0.5', '3:f2702ef3de170d5ec85f6e4cb25a8ff6', 78);\n\n-- Changeset migration-jmuraski-20150106-001.groovy::jmuraski-2015-01-06-03::jmuraski::(Checksum: 3:4e87f9c208c48fb3192c550b06824693)\ndelete from stroller_rental_time where rental_minutes < 10;\n\nINSERT INTO databasechangelog (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('jmuraski', '', NOW(), 'Custom SQL', 'EXECUTED', 'migration-jmuraski-20150106-001.groovy', 'jmuraski-2015-01-06-03', '2.0.5', '3:4e87f9c208c48fb3192c550b06824693', 79);\n\n-- Changeset migration-jmuraski-20150106-001.groovy::jmuraski-2015-01-06-04::jmuraski::(Checksum: 3:a52388c8e16044f3990d779517e2ad60)\ndelete from stroller_rental_time where rental_minutes > 600;\n\nINSERT INTO databasechangelog (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('jmuraski', '', NOW(), 'Custom SQL', 'EXECUTED', 'migration-jmuraski-20150106-001.groovy', 'jmuraski-2015-01-06-04', '2.0.5', '3:a52388c8e16044f3990d779517e2ad60', 80);\n\n-- Release Database Lock\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[76,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":30,"goalBufferRange":null,"autoscroll":false},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"encoding":"utf8","filePath":"/Users/jmuraski/Documents/workspace/remoteinsights/webapp/release-0.0.1.sql","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"68fb7140def9dfb7c41bc1fcfe21517d26c65bc6","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":7,"items":[{"id":24,"softTabs":true,"displayBuffer":{"id":25,"softWrapped":false,"editorWidthInChars":null,"scrollTop":501,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/remoteinsights/webapp/grails-app/assets/javascripts/application/reports/averageRentalTimes.js","invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"TokenizedBuffer"},"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":30,"softTabs":true,"displayBuffer":{"id":31,"softWrapped":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/jmuraski/Documents/workspace/remoteinsights/webapp/release-0.0.1.sql","invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"TokenizedBuffer"},"invisibles":{"eol":"¬","space":"·","tab":"»","cr":"¤"},"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemURI":"/Users/jmuraski/Documents/workspace/remoteinsights/webapp/release-0.0.1.sql","focused":true,"deserializer":"Pane"},"activePaneId":7,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-javascript","language-sql","language-hyperlink","language-todo"],"deserializer":"Workspace"},"grammars":{"deserializer":"GrammarRegistry","grammarOverridesByPath":{}},"packageStates":{"fuzzy-finder":{"/Users/jmuraski/Documents/workspace/remoteinsights/webapp/grails-app/assets/javascripts/application/reports/averageRentalTimes.js":1421942976461,"/Users/jmuraski/Documents/workspace/remoteinsights/webapp/release-0.0.1.sql":1421942977129},"keybinding-resolver":{},"metrics":{"sessionLength":40809555},"tree-view":{"directoryExpansionStates":{},"selectedPath":"/Users/jmuraski/Documents/workspace/remoteinsights/webapp/release-0.0.1.sql","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}